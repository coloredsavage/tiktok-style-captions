/* ============================================================
   CORE CAPTION STYLES
   Inspired by Pelicanizer https://pelicanizer.com/newsites/roundtext/
   ============================================================ */

*, *::before, *::after { box-sizing: border-box; }

#box {
  display: flex;
  flex-direction: column;
  width: fit-content;
}

#box .line {
  margin-bottom: -1px;
}

#box[data-align=left]   { align-items: start; }
#box[data-align=center] { align-items: center; }
#box[data-align=right]  { align-items: end; }

.line {
  --font-scale: 1;
  --border-radius: 0.3em;

  position: relative;
  background-color: var(--bg-color, #ffffff);
  color: var(--fg-color, #000000);

  font-family: "Montserrat", Arial, sans-serif;
  font-size: calc(39px * var(--font-scale));
  font-weight: 600;
  line-height: 0.7;

  width: fit-content;
  padding: 0.35em 0.5em;
  border-radius: 0.3em;

  white-space: pre;
}

.line:empty { visibility: hidden; height: 1em; }

/* Base corner removal by alignment */
#box[data-align=left]  .line:not(:first-child) { border-top-left-radius: 0; }
#box[data-align=left]  .line:not(:last-child)  { border-bottom-left-radius: 0; }
#box[data-align=right] .line:not(:first-child) { border-top-right-radius: 0; }
#box[data-align=right] .line:not(:last-child)  { border-bottom-right-radius: 0; }

/* Corner classes set by JS */
.line.corner-tl { border-top-left-radius: 0; }
.line.corner-bl { border-bottom-left-radius: 0; }
.line.corner-tr { border-top-right-radius: 0; }
.line.corner-br { border-bottom-right-radius: 0; }

/* Pseudo-element corner cutouts */
.line.corner-tl::before, .line.corner-bl::before,
.line.corner-tr::after,  .line.corner-br::after {
  content: "";
  display: block;
  position: absolute;
  top: 0;
  background-color: transparent;
  width: 0.4em;
  height: 100%;
  clip-path: inset(-1px);
}

.line.corner-tl::before, .line.corner-bl::before { left: -0.4em; }
.line.corner-tr::after,  .line.corner-br::after  { right: -0.4em; }

.line.corner-tl::before {
  border-top-right-radius: 0.3em;
  box-shadow: 0.2em -0.2em 0 var(--bg-color, #ffffff);
}
.line.corner-bl::before {
  border-bottom-right-radius: 0.3em;
  box-shadow: 0.2em 0.2em 0 var(--bg-color, #ffffff);
}
.line.corner-tl.corner-bl::before {
  border-top-right-radius: 0.3em;
  border-bottom-right-radius: 0.3em;
  box-shadow: 0.2em -0.2em 0 var(--bg-color, #ffffff), 0.2em 0.2em 0 var(--bg-color, #ffffff);
}
.line.corner-tr::after {
  border-top-left-radius: 0.3em;
  box-shadow: -0.2em -0.2em 0 var(--bg-color, #ffffff);
}
.line.corner-br::after {
  border-bottom-left-radius: 0.3em;
  box-shadow: -0.2em 0.2em 0 var(--bg-color, #ffffff);
}
.line.corner-tr.corner-br::after {
  border-top-left-radius: 0.3em;
  border-bottom-left-radius: 0.3em;
  box-shadow: -0.2em -0.2em 0 var(--bg-color, #ffffff), -0.2em 0.2em 0 var(--bg-color, #ffffff);
}

.line.connect-b { border-bottom-left-radius: 0; border-bottom-right-radius: 0; }
.line.connect-t { border-top-left-radius: 0;    border-top-right-radius: 0; }

/* ============================================================
   PAGE LAYOUT
   ============================================================ */

body {
  font-family: Arial, sans-serif;
  font-size: 14px;
  margin: 0;
  padding: 20px 30px;
  background: #fff;
  color: #000;
}

#page {
  max-width: 900px;
}

h1 { font-size: 22px; margin: 0 0 6px 0; }
p  { margin: 0 0 8px 0; }
hr { margin: 14px 0; border: none; border-top: 1px solid #ccc; }
a  { color: #00e; }

#layout {
  display: flex;
  gap: 40px;
  align-items: flex-start;
}

#controls {
  width: 220px;
  flex-shrink: 0;
}

#controls textarea {
  width: 100%;
  font-family: Arial, sans-serif;
  font-size: 13px;
  padding: 4px;
  border: 1px solid #999;
  resize: vertical;
}

#align-inputs {
  display: flex;
  gap: 10px;
  align-items: center;
}

#color-inputs {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 4px;
}

.color-label {
  display: block;
  width: 24px;
  height: 24px;
  border: 2px solid #999;
  cursor: pointer;
}

input[type="radio"][name="color"] { display: none; }
input[type="radio"][name="color"]:checked + .color-label {
  border-color: #000;
  outline: 2px solid #00e;
}

#button-create {
  padding: 6px 14px;
  font-size: 14px;
  cursor: pointer;
}

#preview {
  flex: 1;
  background: #eee;
  padding: 40px 30px;
  min-height: 200px;
}
