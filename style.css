/* ============================================================
   CORE CAPTION STYLES
   Inspired by Pelicanizer https://pelicanizer.com/newsites/roundtext/
   ============================================================ */

*, *::before, *::after { box-sizing: border-box; }

#box {
  display: flex;
  flex-direction: column;
  width: fit-content;
}

#box .line {
  margin-bottom: -1px;
}

#box[data-align=left]   { align-items: start; }
#box[data-align=center] { align-items: center; }
#box[data-align=right]  { align-items: end; }

.line {
  --font-scale: 1;
  --border-radius: 0.3em;

  position: relative;
  background-color: var(--bg-color, #ffffff);
  color: var(--fg-color, #000000);

  font-family: "Montserrat", Arial, sans-serif;
  font-size: calc(39px * var(--font-scale));
  font-weight: 600;
  line-height: 0.7;

  width: fit-content;
  padding: 0.35em 0.5em;
  border-radius: 0.3em;

  white-space: pre;
}

.line:empty { visibility: hidden; height: 1em; }


/* Base corner removal by alignment */
#box[data-align=left]  .line:not(:first-child) { border-top-left-radius: 0; }
#box[data-align=left]  .line:not(:last-child)  { border-bottom-left-radius: 0; }
#box[data-align=right] .line:not(:first-child) { border-top-right-radius: 0; }
#box[data-align=right] .line:not(:last-child)  { border-bottom-right-radius: 0; }

/* Corner classes set by JS */
.line.corner-tl { border-top-left-radius: 0; }
.line.corner-bl { border-bottom-left-radius: 0; }
.line.corner-tr { border-top-right-radius: 0; }
.line.corner-br { border-bottom-right-radius: 0; }

/* Pseudo-element corner cutouts */
.line.corner-tl::before, .line.corner-bl::before,
.line.corner-tr::after,  .line.corner-br::after {
  content: "";
  display: block;
  position: absolute;
  top: 0;
  background-color: transparent;
  width: 0.4em;
  height: 100%;
  clip-path: inset(-1px);
}

.line.corner-tl::before, .line.corner-bl::before { left: -0.4em; }
.line.corner-tr::after,  .line.corner-br::after  { right: -0.4em; }

.line.corner-tl::before {
  border-top-right-radius: 0.3em;
  box-shadow: 0.2em -0.2em 0 var(--bg-color, #ffffff);
}
.line.corner-bl::before {
  border-bottom-right-radius: 0.3em;
  box-shadow: 0.2em 0.2em 0 var(--bg-color, #ffffff);
}
.line.corner-tl.corner-bl::before {
  border-top-right-radius: 0.3em;
  border-bottom-right-radius: 0.3em;
  box-shadow: 0.2em -0.2em 0 var(--bg-color, #ffffff), 0.2em 0.2em 0 var(--bg-color, #ffffff);
}
.line.corner-tr::after {
  border-top-left-radius: 0.3em;
  box-shadow: -0.2em -0.2em 0 var(--bg-color, #ffffff);
}
.line.corner-br::after {
  border-bottom-left-radius: 0.3em;
  box-shadow: -0.2em 0.2em 0 var(--bg-color, #ffffff);
}
.line.corner-tr.corner-br::after {
  border-top-left-radius: 0.3em;
  border-bottom-left-radius: 0.3em;
  box-shadow: -0.2em -0.2em 0 var(--bg-color, #ffffff), -0.2em 0.2em 0 var(--bg-color, #ffffff);
}

.line.connect-b { border-bottom-left-radius: 0; border-bottom-right-radius: 0; }
.line.connect-t { border-top-left-radius: 0;    border-top-right-radius: 0; }

/* ============================================================
   PAGE LAYOUT
   ============================================================ */

body {
  font-family: Arial, sans-serif;
  font-size: 14px;
  margin: 0;
  padding: 40px 48px;
  background: #fff;
  color: #000;
}

#page {
  max-width: 960px;
}

h1 { font-size: 22px; margin: 0 0 20px 0; }
hr { margin: 0 0 32px 0; border: none; border-top: 1px solid #ccc; }
a  { color: #00e; }

#layout {
  display: flex;
  gap: 60px;
  align-items: flex-start;
}

/* Controls */

#controls {
  width: 240px;
  flex-shrink: 0;
}

.control-group {
  margin-bottom: 24px;
}

.control-group > label {
  display: block;
  font-weight: bold;
  margin-bottom: 8px;
}

.hint {
  font-weight: normal;
  color: #666;
}

#controls textarea {
  width: 100%;
  font-family: Arial, sans-serif;
  font-size: 13px;
  padding: 6px;
  border: 1px solid #999;
  resize: vertical;
}

#align-inputs {
  display: flex;
  gap: 14px;
  align-items: center;
}

#color-inputs {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

.color-label {
  display: block;
  width: 26px;
  height: 26px;
  border: 2px solid #bbb;
  cursor: pointer;
}

input[type="radio"][name="color"] { display: none; }
input[type="radio"][name="color"]:checked + .color-label {
  border-color: #000;
  outline: 2px solid #00e;
  outline-offset: 1px;
}

#custom-colors {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.color-picker-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.color-picker-row input[type="color"] {
  width: 36px;
  height: 26px;
  padding: 0;
  border: 1px solid #999;
  cursor: pointer;
}

.control-group > label input[type="checkbox"] {
  margin-right: 6px;
}

#wrap-width-row {
  display: none;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
}

#wrap-width-row.visible {
  display: flex;
}

#wrap-width {
  flex: 1;
}

#wrap-width-value {
  font-size: 12px;
  color: #666;
  min-width: 36px;
}

#button-create {
  width: 100%;
  padding: 9px 0;
  font-size: 14px;
  cursor: pointer;
}

/* Preview */

#preview {
  flex: 1;
  background: #e8e8e8;
  padding: 60px 40px;
  height: 420px;
  overflow-y: auto;
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
}

/* Footer */

footer {
  margin-top: 48px;
  padding-top: 16px;
  border-top: 1px solid #ccc;
  color: #666;
  font-size: 13px;
}
